{{ template "_base.tmpl" . }}

{{ define "title" }}Podcasts{{ end }}

{{ define "body" }}

  <h1>Add podcast</h1>
  <form method="POST">
    <label>URL:</label> <input type="text" name="url" /><button type="submit">Add</button>
  </form>

  {{ if .SubscribedOnly }}
  <h1>Subscribed podcasts</h1>
  <a href="{{ webroot }}/web/podcast/?showall">All podcasts</a>
  {{ else }}
  <h1>All user podcasts</h1>
  <a href="{{ webroot }}/web/podcast/">Subscribed only</a>
  {{ end }}


  <table>
    <thead>
      <tr>
        <th>Title<br/><small>URL</small></th>
        <th>Description</th>
        <th>Website</th>
        <th>Last action date</th>
        <th>&nbsp;</th>
      </tr>
    </thead>
    <tbody>
      {{range .Podcasts}}
      <tr>
        <td><a href="{{webroot}}/web/podcast/{{ .PodcastID }}/">{{ .Title }}<br/><small>{{ .URL }}</small></a></td>
        <td>{{ if not .Subscribed }}<small><b>Not subscribed</b></small><br/>{{ end }}{{ .Description }}
        </td>
        <td>{{ with .Website }}<a href="{{ . }}">Website</a>{{ end }}</td>
        <td>{{ with .LastEpisode }}{{ .Timestamp }} ({{ .Action }}){{ end }}</td>
        <td>
          <a href="{{webroot}}/web/episode/?podcast={{ .PodcastID }}">Episodes</a>
        </td>
      </tr>
      {{end}}
    </tbody>
  </table>
{{ end }}
